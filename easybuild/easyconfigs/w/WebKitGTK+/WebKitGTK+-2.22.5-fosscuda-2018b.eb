easyblock = 'CMakeMake'

name = 'WebKitGTK+'
version = '2.22.5'

homepage = 'https://webkitgtk.org/'
description = """WebKitGTK+ is a full-featured port of the WebKit
rendering engine, suitable for projects requiring any kind of web
integration, from hybrid HTML/CSS applications to full-fledged web
browsers. It offers WebKitâ€™s full functionality and is useful in a wide
range of systems from desktop computers to embedded systems like phones,
tablets, and televisions."""

toolchain = {'name': 'fosscuda', 'version': '2018b'}

source_urls = ['https://webkitgtk.org/releases']
sources = ['webkitgtk-%(version)s.tar.xz']
patches = ['WebKitGTK+-2.22.5_turn_off_various_problematic_features.patch']
checksums = [
    '99d3863f418a7c3a3e37e5062950dbf2d91fb106ec1633459b0ef6f2d5f6cb13',  # webkitgtk-2.22.5.tar.xz
    # WebKitGTK+-2.22.5_turn_off_various_problematic_features.patch
    '998ea3e9b11bc8d963f23518012914841d1af6b86d7ebe25be03295e05f80ada',
]

osdependencies = [
    # Would be better to use the system package due to security reasons
    # But we need at least libgcrypt 1.7.0 and Ubuntu 16.04 and RH 7.5
    # are both using a too old version.
    # ('libgcrypt-dev', 'libgcrypt20-dev', 'libgcrypt-devel'),
    ('libsecret-1-dev', 'libsecret-devel'),
]

builddependencies = [
    ('CMake', '3.12.1'),
    ('Perl', '5.28.0'),
    ('GObject-Introspection', '1.54.1', '-Python-2.7.15'),
]
dependencies = [
    ('gperf', '3.1'),
    ('cairo', '1.14.12'),
    ('GTK+', '3.22.30'),
    ('LibSoup', '2.65.2'),
    ('ATK', '2.28.1'),
    ('libgcrypt', '1.8.4'),
    ('libwebp', '1.0.2'),
    ('libxslt', '1.1.32'),
    ('libtasn1', '4.13'),
    ('GStreamer', '1.15.1'),
]

configopts = "-DPORT=GTK "

moduleclass = 'lib'
